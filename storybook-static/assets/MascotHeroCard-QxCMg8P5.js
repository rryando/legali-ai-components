import{j as n}from"./jsx-runtime-BjG_zV1W.js";import{r as s}from"./index-yIsmwZOr.js";import{c as R}from"./utils-CDN07tui.js";import{G as $}from"./GlassCard-C4HQ4l4H.js";import{a as M,L as z}from"./LegaliMascot-YN_T4VAf.js";import{T as O}from"./TypingText-a-MuFZ1k.js";const P=[{motion:M.WAVING,durationMs:2e3,lines:["Hey!","Ready to learn?","Pick a module to continue"]},{motion:M.SPEAKING,durationMs:5e3,lines:["Focus on the key terms","Try one lesson at a time","You’ve got this"]},{motion:M.IDLE,durationMs:null,lines:["Tap any module","Your progress is saved","Let’s keep going"]}],C=s.forwardRef(({className:_,heroTitle:q,active:j=!0,script:l,interruptScript:u,triggerKey:d,inactiveMotion:c=M.IDLE,mascotWidth:E=240,mascotHeight:L=240,mascotBlink:W=!0,stream:t,onStepChange:h,onMotionChange:y,...A},H)=>{const g=s.useRef([]),m=s.useCallback(()=>{g.current.forEach(e=>clearTimeout(e)),g.current=[]},[]),[x,V]=s.useState(0),[B,N]=s.useState(c),b=s.useCallback((e,r)=>{V(e),N(r),h==null||h(e),y==null||y(r)},[y,h]),D=s.useCallback(e=>{if(m(),!e.length){b(0,c);return}b(0,e[0].motion);let r=0;for(let a=0;a<e.length-1;a++){const f=e[a].durationMs;if(f==null)break;r+=f;const T=e[a+1],S=window.setTimeout(()=>{b(a+1,T.motion)},r);g.current.push(S)}},[m,c,b]),w=s.useMemo(()=>l!=null&&l.length?l:P,[l]),v=s.useMemo(()=>u!=null&&u.length?u:void 0,[u]),I=s.useRef(d);s.useEffect(()=>{if(!j){m(),N(c);return}const e=I.current!==d;return I.current=d,D(e&&v?v:w),()=>{m()}},[j,d,w,v,c,D,m]);const i=w[x]??w[0]??P[0],U=s.useMemo(()=>typeof window>"u"||typeof window.matchMedia!="function"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches,[]),o=s.useMemo(()=>({charIntervalMs:(t==null?void 0:t.charIntervalMs)??28,linePauseMs:(t==null?void 0:t.linePauseMs)??650,loop:(t==null?void 0:t.loop)??!0,showCursor:(t==null?void 0:t.showCursor)??!0,fitToStepDuration:(t==null?void 0:t.fitToStepDuration)??!0}),[t]),p=s.useMemo(()=>((i==null?void 0:i.lines)??[]).map(e=>e==null?void 0:e.trim()).filter(Boolean),[i==null?void 0:i.lines]),G=s.useCallback(()=>{const a=k=>Math.max(50,Math.min(120,k));if(!o.fitToStepDuration||i.durationMs==null)return a(o.charIntervalMs);const f=p.reduce((k,Y)=>k+Y.length,0);if(f<=0)return a(o.charIntervalMs);const T=Math.max(0,p.length-1)*o.linePauseMs,F=Math.max(0,i.durationMs-T)/f;return a(F)},[i.durationMs,p,o.charIntervalMs,o.fitToStepDuration,o.linePauseMs]);return n.jsxs($,{ref:H,intensity:"high",className:R("rounded-3xl overflow-hidden relative","border-blue-300/60","shadow-xl shadow-blue-900/10","animate-border-glow","bg-blue-500/40","shadow-[0_0_35px_rgba(59,130,246,0.22),inset_0_0_18px_rgba(59,130,246,0.10)]",_),...A,children:[n.jsx("div",{className:"absolute -top-16 -left-16 w-64 h-64 bg-sky-200/45 rounded-full blur-3xl pointer-events-none"}),n.jsx("div",{className:"absolute -bottom-20 -right-20 w-72 h-72 bg-blue-200/40 rounded-full blur-3xl pointer-events-none"}),n.jsxs("div",{className:"relative p-4 md:p-5 flex flex-col md:flex-row items-center gap-4 md:gap-6",children:[n.jsxs("div",{className:"shrink-0 relative",children:[n.jsxs("div",{className:"absolute inset-0 -z-10 flex items-center justify-center pointer-events-none",children:[n.jsx("div",{className:"absolute w-64 h-64 rounded-full bg-white/45 blur-3xl animate-pulse"}),n.jsx("div",{className:"absolute w-64 h-64 rounded-full bg-white/60 blur-3xl animate-pulse delay-700"}),n.jsx("div",{className:"absolute w-64 h-64 rounded-full bg-white/50 blur-2xl"})]}),n.jsx(z,{motion:B,isBlink:W,width:E,height:L,className:"mx-auto"})]}),n.jsxs("div",{className:"flex-1 w-full",children:[q?n.jsx("div",{className:"flex items-center justify-between gap-3",children:n.jsx("h2",{className:"font-bold text-lg md:text-xl text-slate-800 tracking-tight",children:q})}):null,n.jsx("div",{className:R("mt-3 rounded-2xl border border-white/60 bg-white/70 backdrop-blur-md px-4 py-3","animate-in fade-in slide-in-from-bottom"),children:n.jsx("div",{className:"text-sm md:text-base text-slate-700 leading-relaxed",children:U?n.jsx("p",{className:"font-semibold",children:p[0]??""}):n.jsx(O,{className:"font-semibold",texts:p,speed:G(),delay:0,showCursor:o.showCursor,cursor:"▍",cursorClassName:"text-slate-500",loop:o.loop,pauseDuration:o.linePauseMs,startOnView:!1,once:!1},`${x}:${String(d??"")}`)})},x)]})]})]})});C.displayName="MascotHeroCard";C.__docgenInfo={description:"",methods:[],displayName:"MascotHeroCard",props:{heroTitle:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},active:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},script:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  motion: MascotMotionType
  /**
   * Duration for this step in milliseconds.
   * Use \`null\` for infinite duration (no auto-advance).
   */
  durationMs: number | null
  /**
   * Text snippets that will loop continuously in the marquee.
   */
  lines: string[]
}`,signature:{properties:[{key:"motion",value:{name:"unknown[union]",raw:"(typeof MascotMotion)[keyof typeof MascotMotion]",required:!0}},{key:"durationMs",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0},description:"Duration for this step in milliseconds.\nUse `null` for infinite duration (no auto-advance)."},{key:"lines",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0},description:"Text snippets that will loop continuously in the marquee."}]}}],raw:"MascotHeroScriptStep[]"},description:"Primary script that runs on mount / when activated."},interruptScript:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  motion: MascotMotionType
  /**
   * Duration for this step in milliseconds.
   * Use \`null\` for infinite duration (no auto-advance).
   */
  durationMs: number | null
  /**
   * Text snippets that will loop continuously in the marquee.
   */
  lines: string[]
}`,signature:{properties:[{key:"motion",value:{name:"unknown[union]",raw:"(typeof MascotMotion)[keyof typeof MascotMotion]",required:!0}},{key:"durationMs",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0},description:"Duration for this step in milliseconds.\nUse `null` for infinite duration (no auto-advance)."},{key:"lines",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0},description:"Text snippets that will loop continuously in the marquee."}]}}],raw:"MascotHeroScriptStep[]"},description:"Script that runs when `triggerKey` changes (interrupt + restart)."},triggerKey:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"Change this value to immediately restart the script."},inactiveMotion:{required:!1,tsType:{name:"unknown[union]",raw:"(typeof MascotMotion)[keyof typeof MascotMotion]"},description:"",defaultValue:{value:"'IDLE'",computed:!1}},mascotWidth:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:"240",computed:!1}},mascotHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:"240",computed:!1}},mascotBlink:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},stream:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** Base typing speed (ms per character) when \`fitToStepDuration\` is false or step is infinite. */
  charIntervalMs?: number
  /** Pause between lines (ms). */
  linePauseMs?: number
  /** Whether to loop through lines continuously while the step is active. */
  loop?: boolean
  /** Whether to show a blinking cursor while typing. */
  showCursor?: boolean
  /** When step has a finite duration, scale typing speed to fit within it. */
  fitToStepDuration?: boolean
}`,signature:{properties:[{key:"charIntervalMs",value:{name:"number",required:!1},description:"Base typing speed (ms per character) when `fitToStepDuration` is false or step is infinite."},{key:"linePauseMs",value:{name:"number",required:!1},description:"Pause between lines (ms)."},{key:"loop",value:{name:"boolean",required:!1},description:"Whether to loop through lines continuously while the step is active."},{key:"showCursor",value:{name:"boolean",required:!1},description:"Whether to show a blinking cursor while typing."},{key:"fitToStepDuration",value:{name:"boolean",required:!1},description:"When step has a finite duration, scale typing speed to fit within it."}]}},description:""},onStepChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""},onMotionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(motion: MascotMotionType) => void",signature:{arguments:[{type:{name:"unknown[union]",raw:"(typeof MascotMotion)[keyof typeof MascotMotion]"},name:"motion"}],return:{name:"void"}}},description:""}}};export{C as M};
