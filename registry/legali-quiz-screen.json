{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "legali-quiz-screen",
  "type": "registry:ui",
  "files": [
    {
      "path": "components/ui/legali/screens/QuizScreen.tsx",
      "content": "import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { QuizHeader } from \"../composite/QuizHeader\"\nimport { QuizQuestion } from \"../composite/QuizQuestion\"\nimport { QuizFeedback } from \"../composite/QuizFeedback\"\nimport { Answer } from \"../atomic/Answer\"\nimport { Button } from \"@/components/ui/legali/button\"\n\nexport interface AnswerOption {\n  id: string | number\n  text: string\n  correct: boolean\n}\n\nexport interface Question {\n  id: string | number\n  question: string\n  answers: AnswerOption[]\n  explanation: string\n}\n\nexport interface QuizScreenProps extends React.HTMLAttributes<HTMLDivElement> {\n  questions: Question[]\n  onClose: () => void\n  onQuizComplete: (score: number, total: number, userAnswers: Record<string | number, string | number>) => void\n}\n\nconst QuizScreen = React.forwardRef<HTMLDivElement, QuizScreenProps>(\n  ({ className, questions, onClose, onQuizComplete, ...props }, ref) => {\n    const [currentQuestionIndex, setCurrentQuestionIndex] = React.useState(0)\n    const [selectedAnswerId, setSelectedAnswerId] = React.useState<string | number | null>(null)\n    const [userAnswers, setUserAnswers] = React.useState<Record<string | number, string | number>>({})\n    const [isAnswerChecked, setIsAnswerChecked] = React.useState(false)\n    const [score, setScore] = React.useState(0)\n    const [showFeedback, setShowFeedback] = React.useState(false)\n\n    const currentQuestion = questions?.[currentQuestionIndex]\n    \n    if (!currentQuestion) {\n      return <div className=\"p-8 text-center text-slate-500\">No questions available.</div>\n    }\n\n    const isLastQuestion = currentQuestionIndex === questions.length - 1\n    const progress = ((currentQuestionIndex) / questions.length) * 100\n\n    const handleAnswerSelect = (id: string | number) => {\n      if (isAnswerChecked) return\n      setSelectedAnswerId(id)\n    }\n\n    const handleCheck = () => {\n      if (!selectedAnswerId) return\n      \n      const isCorrect = currentQuestion.answers.find(a => a.id === selectedAnswerId)?.correct\n      if (isCorrect) setScore(s => s + 1)\n      \n      setUserAnswers(prev => ({\n        ...prev,\n        [currentQuestion.id]: selectedAnswerId\n      }))\n      \n      setIsAnswerChecked(true)\n      setShowFeedback(true)\n    }\n\n    const handleContinue = () => {\n      if (isLastQuestion) {\n        onQuizComplete(\n          score + (currentQuestion.answers.find(a => a.id === selectedAnswerId)?.correct && !isAnswerChecked ? 1 : 0), // Handle case where check wasn't clicked if that's possible (though UI prevents it) - actually logic above sets score on check.\n          questions.length,\n          userAnswers\n        )\n      } else {\n        setCurrentQuestionIndex(i => i + 1)\n        setSelectedAnswerId(null)\n        setIsAnswerChecked(false)\n        setShowFeedback(false)\n      }\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex flex-col h-full min-h-screen relative overflow-hidden\",\n          // New Bluish Gradient Background\n          \"bg-gradient-to-br from-sky-100 via-blue-50 to-white\",\n          className\n        )}\n        {...props}\n      >\n        {/* Decorative Orbs */}\n        <div className=\"absolute top-[-10%] right-[-10%] w-[600px] h-[600px] bg-sky-200/40 rounded-full blur-3xl pointer-events-none animate-pulse\" />\n        <div className=\"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-200/40 rounded-full blur-3xl pointer-events-none animate-pulse delay-700\" />\n\n        <QuizHeader\n          onClose={onClose}\n          currentQuestion={currentQuestionIndex + 1}\n          totalQuestions={questions.length}\n          progress={progress}\n          className=\"bg-white/40 backdrop-blur-md border-white/20 sticky top-0 z-10\"\n        />\n\n        <div className=\"flex-1 overflow-y-auto px-5 py-8 pb-32 relative z-0\">\n          <div className=\"max-w-2xl mx-auto\">\n            <QuizQuestion\n              question={currentQuestion.question}\n              questionNumber={currentQuestionIndex + 1}\n              className=\"mb-8\"\n            />\n\n            <div className=\"space-y-3\">\n              {currentQuestion.answers.map((answer, index) => (\n                <Answer\n                  key={answer.id}\n                  selected={selectedAnswerId === answer.id}\n                  correct={isAnswerChecked && answer.correct}\n                  incorrect={isAnswerChecked && selectedAnswerId === answer.id && !answer.correct}\n                  onClick={() => handleAnswerSelect(answer.id)}\n                  disabled={isAnswerChecked}\n                  shortcut={String.fromCharCode(65 + index)} // A, B, C, D\n                  className=\"bg-white/60 backdrop-blur-sm border-white/40 hover:bg-white/80\"\n                >\n                  {answer.text}\n                </Answer>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Bottom Action Bar */}\n        {!showFeedback && (\n          <div className=\"fixed bottom-0 left-0 right-0 p-5 bg-white/30 backdrop-blur-xl border-t border-white/20 z-10\">\n            <div className=\"max-w-2xl mx-auto\">\n              <Button\n                onClick={handleCheck}\n                disabled={!selectedAnswerId}\n                className={cn(\n                  \"w-full font-bold py-6 text-lg rounded-2xl shadow-xl transition-all duration-300\",\n                  selectedAnswerId \n                    ? \"bg-blue-600 hover:bg-blue-700 text-white shadow-blue-500/30 hover:-translate-y-1 hover:shadow-2xl\" \n                    : \"bg-slate-200 text-slate-400 cursor-not-allowed\"\n                )}\n              >\n                Check Answer\n              </Button>\n            </div>\n          </div>\n        )}\n\n        <QuizFeedback\n          show={showFeedback}\n          correct={currentQuestion.answers.find(a => a.id === selectedAnswerId)?.correct || false}\n          explanation={currentQuestion.explanation}\n          onContinue={handleContinue}\n          className=\"backdrop-blur-xl bg-white/80 border-t border-white/40\"\n        />\n      </div>\n    )\n  }\n)\nQuizScreen.displayName = \"QuizScreen\"\n\nexport { QuizScreen }\n",
      "type": "registry:ui"
    }
  ],
  "dependencies": [
    "clsx",
    "tailwind-merge"
  ],
  "registryDependencies": [
    "legali-quiz-header",
    "legali-quiz-question",
    "legali-quiz-feedback",
    "legali-answer",
    "legali-button",
    "legali-lib-utils"
  ]
}